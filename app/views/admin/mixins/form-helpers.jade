mixin errorBlock(errors)
  - if (errors)
    .alert.alert-error
      ul
        - each error in errors
          li= error.message

mixin taxonomySelect(levels, taxonomy, prefix)
  - prefix = prefix ? prefix + '-' : '';
  - each level, i in levels
    - var chain = i > 0 ? prefix + 'section' + (i-1) : undefined;
    select.taxonomy(name='doc[taxonomy][#{i}]', id='#{prefix}section#{i}', data-chain=chain)
      option(value='') --
        - each section in level
          - var selected = (taxonomy && taxonomy[i] == section.name) ? 'selected' : undefined;
            option(value=section.name, class=section.parent, selected=selected)= section.name

mixin text-control-group(field, label, doc, errors)
  - doc = doc || {}
  - errors = errors || {}
  .control-group(class=(field in errors ? "error": null))
    label.control-label(for=field)= label
    .controls
      input.input-xlarge(type='text', name='doc[#{field}]', id=field, value=doc[field])

mixin textarea-control-group(field, label, doc, errors, rows)
  - doc = doc || {}
  - errors = errors || {}
  - rows = rows || 3
  .control-group(class=(field in errors ? "error": null))
    label.control-label(for=field)= label
    .controls
      textarea.input-xxlarge(rows=rows, name='doc[#{field}]', id=field)= doc[field]

mixin image-picker(version, doc)
  label.control-label(for=version)= version
  .controls
    input(type='hidden', name='doc[images][#{version}]', value=(doc.images && doc.images.LargeRect))
    .btn-group
      button.btn
        i.icon-picture.icon-black
        span  Attach
      button.btn.btn-info
        i.icon-eye-open.icon-black
        span  View
